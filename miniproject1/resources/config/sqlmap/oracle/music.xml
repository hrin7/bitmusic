<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
                   
<mapper namespace="kr.co.bitmusic.mapper.MusicMapper">

	<resultMap id="musicMap" type="music">
		<result column="no" property="no" />
		<result column="title" property="title" />
		<result column="singer" property="singer" />
		<result column="genre" property="genre" />
		<result column="lyrics" property="lyrics" />
		<result column="rel_date" property="relDate" />
		<result column="music_path" property="musicPath" />
		<result column="music_get_cnt" property="musicGetCnt" />
	</resultMap>
	
	<select id="selectMusicList" resultMap="musicMap">
		select no, singer, title, rel_date
		  from tb_music
	</select>
	
	<select id="selectMusicListBySinger" resultMap="musicMap">
		select no, singer, title, rel_date
		  from tb_music
		 order by singer
	</select>
	
	<select id="selectMusicListByTitle" resultMap="musicMap">
		select no, singer, title, rel_date
		  from tb_music
		 order by title
	</select>
	
	<select id="selectMusicListByRelDate" resultMap="musicMap">
		select no, singer, title, rel_date
		  from tb_music
		 order by rel_date
	</select>
	
	<insert id="insertMusic" parameterType="music">
		insert into tb_music (
			no, 
			title, 
			singer, 
			genre, 
			lyrics, 
			rel_date, 
			music_path
		) values (
			s_music_no.nextval,
			#{title},
			#{singer}, 
			#{genre}, 
			#{lyrics}, 
			#{relDate}, 
			#{musicPath}
		)		
	</insert>
	
	<select id="selectMusicUpdateTitle" parameterType="string" resultMap="musicMap">
		select no, title
		  from tb_music
		 where title like '%' || #{title} || '%'
	</select>
	
	<update id="updateMusicTitle" parameterType="music">
		update tb_music
		   set title = #{title}
	 	 where no = #{no}
	</update>
	
	<select id="selectMusicUpdateSinger" parameterType="string" resultMap="musicMap">
		select no, singer
		  from tb_music
		 where singer like '%' || #{singer} || '%'
	</select>
	
	<update id="updateMusicSinger" parameterType="music">
		update tb_music
		   set singer = #{singer}
	 	 where no = #{no}
	</update>
	
	<select id="selectMusicUpdateGenre" parameterType="string" resultMap="musicMap">
		select no, genre
		  from tb_music
		 where singer like '%' || #{genre} || '%'
	</select>
	
	<update id="updateMusicGenre" parameterType="music">
		update tb_music
		   set genre = #{genre}
	 	 where no = #{no}
	</update>
	
	<select id="selectMusicUpdateRelDate" parameterType="string" resultMap="musicMap">
		select no, rel_date
		  from tb_music
		 where rel_date like '%' || #{relDate} || '%'
	</select>
	
	<update id="updateMusicRelDate" parameterType="music">
		update tb_music
		   set rel_date = #{relDate}
	 	 where no = #{no}
	</update>
	
	<select id="selectMusicUpdateMusicPath" parameterType="string" resultMap="musicMap">
		select no, music_path
		  from tb_music
		 where music_path like '%' || #{musicPath} || '%'
	</select>
	
	<update id="updateMusicMusicPath" parameterType="music">
		update tb_music
		   set music_path = #{musicPath}
	 	 where no = #{no}
	</update>
	
	<delete id="deleteMusic">
		delete 
		  from tb_music
		 where title = #{title}
	</delete>
</mapper>